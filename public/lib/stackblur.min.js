function stackBlurImage(a,b,c,d,e,f){var g=document.getElementById(a);var h=d;var i=e;var j=document.getElementById(b);j.style.width=h+"px";j.style.height=i+"px";j.width=h;j.height=i;var k=j.getContext("2d");if(f)k.scale(d/g.naturalWidth,e/g.naturalHeight);else k.scale(d/g.naturalWidth,d/g.naturalWidth);k.clearRect(0,0,h,i);k.drawImage(g,0,0);if(isNaN(c)||c<1)return;stackBlurCanvasRGB(b,0,0,h,i,c)}function stackBlurCanvasRGB(a,b,c,d,e,f){if(isNaN(f)||f<1)return;f|=0;var g=document.getElementById(a);var h=g.getContext("2d");var i;try{i=h.getImageData(b,c,d,e)}catch(j){console.log(j)}var k=i.data;var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;var F=f+f+1;var G=d<<2;var H=d-1;var I=e-1;var J=f+1;var K=J*(J+1)/2;var L=new BlurStack;var M=L;for(n=1;n<F;n++){M=M.next=new BlurStack;if(n==J)var N=M}M.next=L;var O=null;var P=null;r=q=0;var Q=mul_table;var R=shg_table;for(m=0;m<e;m++){y=z=A=s=t=u=0;v=J*(B=k[q]);w=J*(C=k[q+1]);x=J*(D=k[q+2]);s+=K*B;t+=K*C;u+=K*D;M=L;for(n=0;n<J;n++){M.r=B;M.g=C;M.b=D;M=M.next}for(n=1;n<J;n++){o=q+((H<n?H:n)<<2);s+=(M.r=B=k[o])*(E=J-n);t+=(M.g=C=k[o+1])*E;u+=(M.b=D=k[o+2])*E;y+=B;z+=C;A+=D;M=M.next}O=L;P=N;for(l=0;l<d;l++){k[q]=s*Q>>R;k[q+1]=t*Q>>R;k[q+2]=u*Q>>R;s-=v;t-=w;u-=x;v-=O.r;w-=O.g;x-=O.b;o=r+((o=l+f+1)<H?o:H)<<2;y+=O.r=k[o];z+=O.g=k[o+1];A+=O.b=k[o+2];s+=y;t+=z;u+=A;O=O.next;v+=B=P.r;w+=C=P.g;x+=D=P.b;y-=B;z-=C;A-=D;P=P.next;q+=4}r+=d}for(l=0;l<d;l++){z=A=y=t=u=s=0;q=l<<2;v=J*(B=k[q]);w=J*(C=k[q+1]);x=J*(D=k[q+2]);s+=K*B;t+=K*C;u+=K*D;M=L;for(n=0;n<J;n++){M.r=B;M.g=C;M.b=D;M=M.next}p=d;for(n=1;n<=f;n++){q=p+l<<2;s+=(M.r=B=k[q])*(E=J-n);t+=(M.g=C=k[q+1])*E;u+=(M.b=D=k[q+2])*E;y+=B;z+=C;A+=D;M=M.next;if(n<I){p+=d}}q=l;O=L;P=N;for(m=0;m<e;m++){o=q<<2;k[o]=s*Q>>R;k[o+1]=t*Q>>R;k[o+2]=u*Q>>R;s-=v;t-=w;u-=x;v-=O.r;w-=O.g;x-=O.b;o=l+((o=m+J)<I?o:I)*d<<2;s+=y+=O.r=k[o];t+=z+=O.g=k[o+1];u+=A+=O.b=k[o+2];O=O.next;v+=B=P.r;w+=C=P.g;x+=D=P.b;y-=B;z-=C;A-=D;P=P.next;q+=d}}h.putImageData(i,b,c)}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}var mul_table=328,shg_table=21